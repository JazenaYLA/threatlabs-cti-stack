services:
  flowise:
    image: flowiseai/flowise:latest
    container_name: flowise-cti
    restart: unless-stopped
    ports:
      - "${FLOWISE_PORT:-3000}:3000"
    environment:
      - PORT=3000
      - FLOWISE_USERNAME=${FLOWISE_USERNAME:-admin}
      - FLOWISE_PASSWORD=${FLOWISE_PASSWORD}
    volumes:
      - ./vol/flowise/.flowise:/root/.flowise
    networks:
      - cti-net
    labels:
      # Optional: Traefik Reverse Proxy (Auto-Discovery)
      # Can be ignored if using Nginx/Caddy/etc via port 3000
      - "traefik.enable=true"
      - "traefik.http.routers.flowise.rule=Host(`flowise.local`)"
      - "traefik.http.services.flowise.loadbalancer.server.port=3000"

networks:
  cti-net:
    external: true
    name: cti-net
